# iBlog é¡¹ç›®ç¯å¢ƒé…ç½®æŒ‡å— (Ubuntu)

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚
- Ubuntu 18.04 æˆ–æ›´é«˜ç‰ˆæœ¬
- è‡³å°‘ 2GB å¯ç”¨å†…å­˜
- è‡³å°‘ 10GB å¯ç”¨ç£ç›˜ç©ºé—´

## ğŸ—‚ï¸ ç›®å½•
1. [MySQL å®‰è£…ä¸é…ç½®](#mysql-å®‰è£…ä¸é…ç½®)
2. [DBeaver å®‰è£…ï¼ˆå¯é€‰ï¼‰](#dbeaver-å®‰è£…å¯é€‰)
3. [Node.js ä¸ nvm å®‰è£…](#nodejs-ä¸-nvm-å®‰è£…)
4. [é¡¹ç›®ä¾èµ–å®‰è£…](#é¡¹ç›®ä¾èµ–å®‰è£…)
5. [æ•°æ®åº“åˆå§‹åŒ–](#æ•°æ®åº“åˆå§‹åŒ–)
6. [é¡¹ç›®å¯åŠ¨](#é¡¹ç›®å¯åŠ¨)

---

## MySQL å®‰è£…ä¸é…ç½®

### 1. å®‰è£… MySQL Server
```bash
# æ›´æ–°åŒ…ç®¡ç†å™¨
sudo apt update

# å®‰è£… MySQL Server
sudo apt install mysql-server -y

# å¯åŠ¨ MySQL æœåŠ¡
sudo systemctl start mysql
sudo systemctl enable mysql

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status mysql
```

### 2. å®‰å…¨é…ç½® MySQL
```bash
# è¿è¡Œå®‰å…¨è„šæœ¬
sudo mysql_secure_installation
```
æŒ‰ç…§æç¤ºè¿›è¡Œä»¥ä¸‹é…ç½®ï¼š
- è®¾ç½® root å¯†ç 
- ç§»é™¤åŒ¿åç”¨æˆ·
- ç¦æ­¢ root è¿œç¨‹ç™»å½•
- ç§»é™¤æµ‹è¯•æ•°æ®åº“
- é‡æ–°åŠ è½½æƒé™è¡¨

### 3. éªŒè¯ MySQL å®‰è£…
```bash
# ç™»å½• MySQL
sudo mysql -u root -p

# åœ¨ MySQL ä¸­æŸ¥çœ‹ç‰ˆæœ¬
SELECT VERSION();
exit
```

---

## DBeaver å®‰è£…ï¼ˆå¯é€‰ï¼‰

å¯è§†åŒ–ç•Œé¢æ•°æ®åº“ç®¡ç†

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Snapï¼ˆæ¨èï¼‰
```bash
sudo snap install dbeaver-ce
```

### æ–¹æ³•äºŒï¼šä½¿ç”¨å®˜æ–¹åŒ…
```bash
# ä¸‹è½½ DBeaver
wget https://dbeaver.io/files/dbeaver-ce_latest_amd64.deb

# å®‰è£…
sudo dpkg -i dbeaver-ce_latest_amd64.deb
sudo apt-get install -f  # ä¿®å¤ä¾èµ–

# å¯åŠ¨ DBeaver
dbeaver-ce
```

---

## Node.js ä¸ nvm å®‰è£…

### 1. å®‰è£… nvmï¼ˆNode Version Managerï¼‰
```bash
# ä¸‹è½½å¹¶å®‰è£… nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# é‡æ–°åŠ è½½ bash é…ç½®
source ~/.bashrc

# éªŒè¯ nvm å®‰è£…
nvm --version
```

### 2. å®‰è£… Node.js
```bash
# å®‰è£…æœ€æ–°çš„ LTS ç‰ˆæœ¬
nvm install --lts

# ä½¿ç”¨ LTS ç‰ˆæœ¬
nvm use --lts

# è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬
nvm alias default node

# éªŒè¯å®‰è£…
node --version
npm --version
```

---

## é¡¹ç›®ä¾èµ–å®‰è£…

### 1. å…‹éš†é¡¹ç›®ï¼ˆå¦‚æœä» Git è·å–ï¼‰
```bash
git clone https://github.com/kiraTheresa/iblog-server
cd server-for-iblog
```

### 2. å®‰è£…é¡¹ç›®ä¾èµ–
```bash
# ä½¿ç”¨ npm
npm install

# æˆ–è€…ä½¿ç”¨ yarn
yarn install
```

### 3. æ£€æŸ¥ä¾èµ–å®‰è£…
```bash
# æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ
npm list

# å¦‚æœæœ‰ TypeScriptï¼Œæ£€æŸ¥ç¼–è¯‘
npx tsc --noEmit
```

---

## æ•°æ®åº“åˆå§‹åŒ–

### 1. åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
```bash
# ä½¿ç”¨ root ç”¨æˆ·æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
sudo mysql -u root -p < database/init.sql
```

### 2. æ‰‹åŠ¨åˆå§‹åŒ–ï¼ˆå¤‡ç”¨æ–¹æ³•ï¼‰
```bash
# ç™»å½• MySQL
sudo mysql -u root -p

# åœ¨ MySQL ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
CREATE DATABASE iblog;
USE iblog;

-- åˆ›å»ºç”¨æˆ·ï¼ˆæ³¨æ„ï¼šç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨æ›´å¼ºå¯†ç ï¼‰
CREATE USER 'Theresa'@'localhost' IDENTIFIED BY '123';
GRANT ALL PRIVILEGES ON iblog.* TO 'Theresa'@'localhost';
FLUSH PRIVILEGES;

-- é€€å‡º MySQL
exit
```

### 3. éªŒè¯æ•°æ®åº“è¿æ¥
```bash
# ä½¿ç”¨æ–°åˆ›å»ºçš„ç”¨æˆ·ç™»å½•æµ‹è¯•
mysql -u Theresa -p -D iblog

# åœ¨ MySQL ä¸­æŸ¥çœ‹è¡¨
SHOW TABLES;
exit
```

---

## é¡¹ç›®å¯åŠ¨

### 1. ç¯å¢ƒé…ç½®
```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®ç¤ºä¾‹æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯
nano .env
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æˆ–è€…ç”Ÿäº§æ¨¡å¼
npm start
```

### 3. éªŒè¯è¿è¡Œ
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:3000`ï¼ˆç«¯å£å¯èƒ½ä¸åŒï¼Œè¯·æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£ï¼‰

---

## ğŸ”§ æ•…éšœæ’é™¤

### MySQL è¿æ¥é—®é¢˜
```bash
# æ£€æŸ¥ MySQL æœåŠ¡çŠ¶æ€
sudo systemctl status mysql

# æ£€æŸ¥ç«¯å£ç›‘å¬
sudo netstat -tlnp | grep 3306

# æ£€æŸ¥ MySQL é”™è¯¯æ—¥å¿—
sudo tail -f /var/log/mysql/error.log
```

### Node.js æƒé™é—®é¢˜
```bash
# å¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼Œä¿®å¤ npm å…¨å±€å®‰è£…æƒé™
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
source ~/.bashrc
```

### é˜²ç«å¢™é…ç½®
```bash
# å¦‚æœä½¿ç”¨é˜²ç«å¢™ï¼Œå¼€æ”¾ MySQL ç«¯å£
sudo ufw allow 3306
sudo ufw allow 3000  # åº”ç”¨ç«¯å£
```

---

## ğŸ“ éªŒè¯æ¸…å•

å®Œæˆæ‰€æœ‰æ­¥éª¤åï¼Œè¯·éªŒè¯ï¼š

- [ ] MySQL æœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] æ•°æ®åº“ `iblog` åˆ›å»ºæˆåŠŸ
- [ ] ç”¨æˆ· `Theresa` å¯ä»¥è¿æ¥æ•°æ®åº“
- [ ] Node.js å’Œ npm æ­£ç¡®å®‰è£…
- [ ] é¡¹ç›®ä¾èµ–å®‰è£…æ— é”™è¯¯
- [ ] åº”ç”¨å¯ä»¥æ­£å¸¸å¯åŠ¨
- [ ] å¯ä»¥è®¿é—®åº”ç”¨ç•Œé¢

---

## ğŸ’¡ æç¤º

1. **ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¯·ä½¿ç”¨æ›´å¼ºçš„å¯†ç å’Œé€‚å½“çš„å®‰å…¨é…ç½®
2. **ç«¯å£é…ç½®**ï¼šç¡®ä¿åº”ç”¨ç«¯å£å’Œæ•°æ®åº“ç«¯å£åœ¨é˜²ç«å¢™ä¸­æ­£ç¡®é…ç½®
3. **å¤‡ä»½**ï¼šå®šæœŸå¤‡ä»½æ•°æ®åº“é‡è¦æ•°æ®
4. **ç›‘æ§**ï¼šè®¾ç½®é€‚å½“çš„æ—¥å¿—å’Œç›‘æ§æœºåˆ¶

